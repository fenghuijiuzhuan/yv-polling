!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var o,n=e();for(o in n)("object"==typeof exports?exports:t)[o]=n[o]}}(self,function(){return(()=>{"use strict";var n={d:(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},t={};function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}n.r(t),n.d(t,{default:()=>u});var e=[],o=function(){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=Object.assign({type:"step",interval:1e3,action:null,count:1/0},t),this.init(),this}var t,o,n;return t=e,(o=[{key:"init",value:function(){this.timer=null,this._count=0,this.pause=!1,this.surplustime=0}},{key:"stop",value:function(){this.pause=!0,this.timer&&clearTimeout(this.timer)}},{key:"beforeNext",value:function(){return this._count>=this.options.count?this.stop():this.createtimer()}},{key:"looper",value:function(){var t,e=arguments,o=this,n=this.options.action();if(!(t=n)||"object"!==i(t)&&"function"!=typeof t||"function"!=typeof t.then)return this._count++,this.beforeNext.call(this);n.then(function(){return o._count++,o.beforeNext.call(o,function(){return Promise.resolve(e)})})}},{key:"createtimer",value:function(t){this.pause||(t||(this.surplustime=(new Date).getTime()),this.timer&&clearTimeout(this.timer),this.timer=setTimeout(this.looper.bind(this),t||this.options.interval))}},{key:"run",value:function(){return this.pause=!1,this.createtimer(),this}},{key:"goon",value:function(){this.pause=!1;var t=(new Date).getTime()-this.surplustime;t>=this.options.interval?this.looper.call(this):this.createtimer(this.options.interval-t)}}])&&r(t.prototype,o),n&&r(t,n),e}();const u={start:function(t){t=new o(t);return e.push(t),t},stop:function(t){t&&t.stop.call(t)},clear:function(){e.forEach(function(t){return t.stop.call(t)})}};return t})()});